---
import Layout from "../layouts/Layout.astro";
import { Icon } from "astro-icon/components";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts"))
	.sort(
	(a, b) => b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf()
	)
	.slice(0, 3);

const projects = (await getCollection("projects"))
	.sort(
	(a, b) => b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf()
	)
	.slice(0, 3);
---

<Layout title="Happer64Bit portfolio" description="A Student from Myanmar who do coding and designing by ❤️">
	<div class="mb-6 px-6 flex items-center gap-4 justify-between">
		<h2 class="text-3xl font-bold">
			<span class="font-mono text-red-600 mr-1">#</span>Posts
		</h2>
		<a href="/posts" class="group flex items-center gap-1 text-sm hover:underline">View All Posts
			<Icon name="mdi:arrow-right" class="group-hover:mr-2 transform duration-100" />
		</a>
	</div>
	<div>
		{posts.map((post) => (
			<a href={`/posts/${post.slug}`}>
				<div class="p-6 hover:bg-white/5 rounded-lg mb-3" transition:name={`page-${post.slug}`}>
					<h3 class="text-2xl font-medium">{post.data.title}</h3>
					<p class="text-slate-400">{post.data.summery}</p>
				</div>
			</a>
		))}
	</div>
	<div class="my-10 border"></div>
	<div class="col-span-6">
		<div class="mb-6 px-6 flex items-center gap-4 justify-between">
			<h2 class="text-3xl font-bold">
				<span class="font-mono text-purple-600 mr-1">#</span>Projects
			</h2>
			<a href="/projects" class="group flex items-center gap-1 text-sm hover:underline">View All Projects
				<Icon name="mdi:arrow-right" class="group-hover:mr-2 transform duration-100" />
			</a>
		</div>
		<div>
			{projects.map((project) => (
				<a href={`/projects/${project.slug}`} transition:name={`project-${project.slug}`}>
					<div class="p-6 hover:bg-white/5 rounded-lg mb-3">
						<h3 class="text-2xl font-medium">{project.data.title}</h3>
						<p class="text-slate-400">{project.data.summery}</p>
						<div class="flex flex-warp gap-2 mt-2">
							{project.data.tags.map((tag: string) => (
							<div class="px-2 font-mono border rounded text-sm opacity-80">
								#{tag}
							</div>
							))}
						</div>
					</div>
				</a>
			))}
		</div>
	</div>
</Layout>